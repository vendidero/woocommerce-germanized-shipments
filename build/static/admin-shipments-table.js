!function(){var t,e;window.shipments=window.shipments||{},window.shipments.admin=window.shipments.admin||{},t=jQuery,(e=window.shipments).admin.shipments_table={params:{},init:function(){var n=e.admin.shipments_table;n.params=wc_gzd_shipments_admin_shipments_table_params,n.initEnhanced(),t(document).on("click","#doaction, #doaction2",n.onBulkSubmit),t(".has-shipment-modal").wc_gzd_shipments_admin_shipment_modal(),t(document.body).on("init_tooltips",(function(){n.initTipTip()})),n.initTipTip()},onBulkSubmit:function(){var n=e.admin.shipments_table,i=t(this).parents(".bulkactions").find("select[name^=action]").val(),a=t(this).parents("#posts-filter").find("input.shipment_type").val(),s=[];if(t("#posts-filter").find('input[name="shipment[]"]:checked').each((function(){s.push(t(this).val())})),n.params.bulk_actions.hasOwnProperty(i)&&s.length>0){var o=n.params.bulk_actions[i];return t(".bulk-action-wrapper").find(".bulk-title").text(o.title),t("#posts-filter").addClass("bulk-action-processing"),t("#posts-filter").find(".bulkactions button").prop("disabled",!0),n.handleBulkAction(i,1,s,a),!1}},handleBulkAction:function(n,i,a,s){var o=e.admin.shipments_table,c=o.params.bulk_actions[n];t.ajax({type:"POST",url:o.params.ajax_url,data:{action:"woocommerce_gzd_shipments_bulk_action_handle",bulk_action:n,step:i,type:s,referer:window.location.href,ids:a,security:c.nonce},dataType:"json",success:function(e){e.success&&("done"===e.data.step?(t(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(e.data.percentage),window.location=e.data.url,setTimeout((function(){t("#posts-filter").removeClass("bulk-action-processing"),t("#posts-filter").find(".bulkactions button").prop("disabled",!1)}),2e3)):(t(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(e.data.percentage),o.handleBulkAction(n,parseInt(e.data.step,10),e.data.ids,e.data.type)))}}).fail((function(t){window.console.log(t)}))},initTipTip:function(){t(".column-actions .wc-gzd-shipment-action-button").tipTip({fadeIn:50,fadeOut:50,delay:200})},initEnhanced:function(){try{t(document.body).on("wc-enhanced-select-init",(function(){t(":input.wc-gzd-order-search").filter(":not(.enhanced)").each((function(){var e={allowClear:!!t(this).data("allow_clear"),placeholder:t(this).data("placeholder"),minimumInputLength:t(this).data("minimum_input_length")?t(this).data("minimum_input_length"):"1",escapeMarkup:function(t){return t},ajax:{url:wc_gzd_shipments_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"woocommerce_gzd_json_search_orders",security:wc_gzd_shipments_admin_shipments_table_params.search_orders_nonce,exclude:t(this).data("exclude")}},processResults:function(e){var n=[];return e&&t.each(e,(function(t,e){n.push({id:t,text:e})})),{results:n}},cache:!0}};t(this).selectWoo(e).addClass("enhanced")})),t(":input.wc-gzd-shipping-provider-search").filter(":not(.enhanced)").each((function(){var e={allowClear:!!t(this).data("allow_clear"),placeholder:t(this).data("placeholder"),minimumInputLength:t(this).data("minimum_input_length")?t(this).data("minimum_input_length"):"1",escapeMarkup:function(t){return t},ajax:{url:wc_gzd_shipments_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"woocommerce_gzd_json_search_shipping_provider",security:wc_gzd_shipments_admin_shipments_table_params.search_shipping_provider_nonce,exclude:t(this).data("exclude")}},processResults:function(e){var n=[];return e&&t.each(e,(function(t,e){n.push({id:t,text:e})})),{results:n}},cache:!0}};t(this).selectWoo(e).addClass("enhanced")}))})),t("html").on("click",(function(e){this===e.target&&(t(":input.wc-gzd-order-search").filter(".select2-hidden-accessible").selectWoo("close"),t(":input.wc-gzd-shipping-provider-search").filter(".select2-hidden-accessible").selectWoo("close"))}))}catch(t){window.console.log(t)}}},t(document).ready((function(){e.admin.shipments_table.init()})),((window.wcGzdShipments=window.wcGzdShipments||{}).static=window.wcGzdShipments.static||{})["admin-shipments-table"]={}}();